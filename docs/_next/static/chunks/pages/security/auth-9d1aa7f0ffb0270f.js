(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{2095:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/security/auth",function(){return n(6552)}])},6552:function(e,t,n){"use strict";n.r(t),n.d(t,{__toc:function(){return l}});var a=n(5893),i=n(2673),r=n(9298),s=n(9812);n(6834);var o=n(2643);let l=[{depth:2,value:"Connected Apps and External Authorization Servers (EAS)",id:"connected-apps-and-external-authorization-servers-eas"},{depth:3,value:"Connected Apps",id:"connected-apps"},{depth:3,value:"External Authorization Servers",id:"external-authorization-servers"},{depth:3,value:"Add the JWT to the Tableau viz component",id:"add-the-jwt-to-the-tableau-viz-component"},{depth:2,value:"Trusted Authentication",id:"trusted-authentication"},{depth:2,value:"Kerberos, Active Directory, SAML, and OpenID",id:"kerberos-active-directory-saml-and-openid"}];function _createMdxContent(e){let t=Object.assign({h1:"h1",p:"p",strong:"strong",ul:"ul",li:"li",a:"a",h2:"h2",h3:"h3",ol:"ol",code:"code",pre:"pre",span:"span",br:"br"},(0,o.a)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{children:"Authentication and Single Sign-On (SSO)"}),"\n",(0,a.jsx)(t.p,{children:"In most embedding scenarios, you will want to enable single sign-on so that the users that are signed in to your application do not have to also sign into Tableau Server or Tableau Online. There are various options to enable single sign-on (SSO) to Tableau."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note:"})," This page discusses users logging into Tableau Server and  Tableau Online. Related, but separate, is the issue of [user management]({{ site.baseurl }}/pages/03_server_management_and_restapi) in which you ensure all relevant users are registered and provisioned with Tableau."]}),"\n",(0,a.jsx)(t.p,{children:"The guidance for which single sign-on option to use is:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Connected Apps:"})," Use Connected Apps if you want to facilitate an explicit trust relationship between Tableau Online or Tableau Server and external applications where Tableau content is embedded. The trust relationship is established and verified through an authentication token in the ",(0,a.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc7519",children:"JSON Web Token (JWT) standard"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"External Authorization Servers (EAS):"})," Use EAS if you prefer to establish a trust relationship between Tableau Server and an identity provider you've already configured for Tableau Server. A standard OAuth flow is used to provide your users a single sign-on experience to Tableau content embedded in your external applications."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Trusted Authentication:"})," Use Trusted Authentication if you wish to establish trust between Tableau Server and one or more web servers using an IP allowlist. Until the release of Connected Apps and EAS, Trusted Authentication was the most commonly implemented single sign-on solution. If advanced JavaScript API v2 capabilities are required, Trusted Authentication will still be the best fit."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Active Directory + Kerberos:"})," If all of your users are registered in your Active Directory instance and you already use Kerberos for authentication for other applications, use Active Directory + Kerberos."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Active Directory + 'Enable automatic logon':"})," If all of your users are registered in your Active Directory instance, but you do not use Kerberos, use Active Directory with the 'Enable automatic logon' option (which uses Microsoft SSPI)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"SAML or OpenID:"})," If you have already use SAML or OpenID in your systems, configure Tableau Server to use your existing SAML or OpenID deployment."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"connected-apps-and-external-authorization-servers-eas",children:"Connected Apps and External Authorization Servers (EAS)"}),"\n",(0,a.jsx)(t.p,{children:"With Connected Apps (CA) and External Authorization Server (EAS), you have two modern options to implement seamless SSO authentication for embedded Tableau views. You can either setup a trust relationship between Tableau Server, or Tableau Online, and your external application (CA) using an authentication token in the JWT standard. Or you can establish a trust relationship between Tableau Server and an identity provider (EAS) to implement a standard OAuth flow. Both options provide additional security and control scopes over Trusted Authentication. To leverage either of these methods, you must use Tableau 2021.4 (or later) and the Embedding API v3 to embed your views."}),"\n",(0,a.jsx)(t.h3,{id:"connected-apps",children:"Connected Apps"}),"\n",(0,a.jsxs)(t.p,{children:["For information about using connected apps for embedding views from Tableau Online, see ",(0,a.jsx)(t.a,{href:"https://help.tableau.com/current/online/en-us/connected_apps.htm",children:"Configure Tableau Connected Apps to Enable SSO for Embedded Content"}),". For information about setting up a connected app on Tableau Server or Tableau Online using the Tableau REST API, see the ",(0,a.jsx)(t.a,{href:"https://help.tableau.com/v2021.4/api/rest_api/en-us/REST/rest_api_ref_connected_app.htm",children:"Connected App Methods"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Here is a short summary of the steps you need to take. There are four parts to enabling your embedded view as a connected app."}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"As a Tableau site administrator, login in to Tableau Online and create a new connected app. Or for Tableau Server or Tableau Online, use the REST API connected apps methods to create a new connected app). Make note of the client ID, as you will need this to create the JWT."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Generate the secret(s) for the connected app. Make note of this secret ID and secret value as you will need these when you create the JWT."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Configure the web server that hosts your embedded application to generate the (JWT). The JWT is generated dynamically for each user. There are JWT libraries and packages in various languages that you can use to build the JWT."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["After you have the JWT, you need to pass this value to the Tableau viz web component ",(0,a.jsx)(t.code,{children:"<tableauViz>"}),". Once configured, users can securely view embedded content in your application without going through login screens."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"external-authorization-servers",children:"External Authorization Servers"}),"\n",(0,a.jsxs)(t.p,{children:["If you are using an IdP on Tableau Server to authenticate users, you can use an external authorization server (EAS). The EAS must be set up to provide a JSON web token (JWT) for each user. You use the JWT when you embed the Tableau view as a web component in your application. When the embedded content is loaded, the standard OAuth flow is used. After users sign in to the IdP, they are automatically signed in to Tableau Server. For information, see ",(0,a.jsx)(t.a,{href:"https://help.tableau.com/current/server-linux/en-us/connected_apps_eas.htm",children:"Register EAS to Enable SSO for Embedded Content (Linux)"})," or ",(0,a.jsx)(t.a,{href:"https://help.tableau.com/current/server/en-us/connected_apps_eas.htm",children:"Register EAS to Enable SSO for Embedded Content (Windows)"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"add-the-jwt-to-the-tableau-viz-component",children:"Add the JWT to the Tableau viz component"}),"\n",(0,a.jsxs)(t.p,{children:["Whether you are configuring your embedded web application to use EAS for Tableau Server, or as a connected app on Tableau Online or Tableau Server, you need to explicitly pass the JWT that is generated by the EAS or by your web server to the ",(0,a.jsx)(t.code,{children:"<tableauViz>"})," web component.  You do this using the ",(0,a.jsx)(t.code,{children:"token"})," attribute."]}),"\n",(0,a.jsxs)(t.p,{children:["For example, if you programmatically build the JWT for each user and assign it to a variable ",(0,a.jsx)(t.code,{children:"JWT"}),", you might use a template literal to reference the JWT on your HTML page."]}),"\n",(0,a.jsx)(t.pre,{"data-language":"html","data-theme":"default",children:(0,a.jsxs)(t.code,{"data-language":"html","data-theme":"default",children:[(0,a.jsx)(t.span,{className:"line",children:" "}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"tableau-viz"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"id"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"tableauViz"'})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"src"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'https://your-tableau-server/views/my-workbook/my-view'"})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"token"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"${JWT}"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"</"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"tableau-viz"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,a.jsx)(t.span,{className:"line",children:" "}),"\n",(0,a.jsx)(t.span,{className:"line",children:" "})]})}),"\n",(0,a.jsx)(t.h2,{id:"trusted-authentication",children:"Trusted Authentication"}),"\n",(0,a.jsx)(t.p,{children:"Trusted authentication is a piece of functionality specific to Tableau Server. It allows you to trust specific machines to authenticate users on their behalf. Because the authentication happens with simple HTTP requests, it is a versatile single sign-on option and can be used to integrate with, essentially, all other authentication systems or web auth flows."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/trusted_auth.htm",children:"The Trusted Authentication documentation"})," is a good resource for getting up and running, but below is a summary of the three steps in the trusted authentication workflow:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Configuration: This is a one-time step where you configure Tableau Server to 'trust' specific IP addresses, which will then be allowed to authenticate users. The machines to trust are usually the machines running your web application. ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/trusted_auth_trustIP.htm",children:"[Details]"})]}),"\n",(0,a.jsxs)(t.li,{children:["POST Request: When the user navigates to a page in your web application that contains Tableau content, the web application will make a server-side POST request to Tableau Server passing in the users's Tableau Server username, the site the content exists on, and, optionally, the client's IP address in the form data. If the IP address making the request is trusted, and the user exists in Tableau Server, Tableau Server will return a ticket. ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/trusted_auth_webrequ.htm",children:"[Details]"})]}),"\n",(0,a.jsxs)(t.li,{children:["Client loads the view with the ticket: Your web application now instructs the client to load the url of the desired resource, with the ticket inserted. If the ticket is valid, Tableau Server will start a session for the user and the user will see the visualization. Of course, the user does not see the HTTP requests going on behind the scenes, but simply loads a page in your application and sees embedded Tableau content without having to signin. ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/trusted_auth_webURL.htm",children:"[Details]"})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Additional considerations:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"A common desire is to use a single 'service' account to authenticate the users. This is not a recommended approach, because it does not allow you to apply [data security]({{ site.baseurl }}/pages/04_multitenancy_and_rls) or to track usage on a per-user basis."}),"\n",(0,a.jsxs)(t.li,{children:["The trusted ticket is redeemable only once within three minutes of being issued and establishes a Tableau Server session for the user. The session allows the user to access any of the views that they have access to, as determined by the user and content permissions on the server. For more information, see ",(0,a.jsx)(t.a,{href:"https://help.tableau.com/current/server/en-us/trusted_auth.htm",children:"Trusted Authentication"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:["By default, tickets can be redeemed only for embedded visualizations, and not for other content pages in Tableau Server. To enable the user to see those, you must configure ",(0,a.jsx)(t.a,{href:"https://kb.tableau.com/articles/issue/login-prompt-when-embedding-server",children:"unrestricted tickets"}),". See also: the [embedding non-view content]({{ site.baseurl }}/pages/06_embedding_non_view_content) page in this playbook."]}),"\n",(0,a.jsx)(t.li,{children:"If your web application has dynamic IP addresses, such that it is not feasible to trust a specific set of static IP addresses, you have a couple of options. You could create a small 'ticket requester' application that only allows requests from your web application. The 'ticket requester' requests tickets from the server, and then returns them to your web application. You can then deploy this 'ticket requester' application to a static IP address. Or you could consider leveraging one of the other authentication mechanisms listed above that do not depend on an IP allowlist."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"kerberos-active-directory-saml-and-openid",children:"Kerberos, Active Directory, SAML, and OpenID"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["To use Kerberos for SSO, you must first ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/config_general.htm#UserAuth",children:"configure Tableau Server to Use Active Directory"})," and then ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/config_kerberos.htm",children:"configure Tableau Server to use Kerberos"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["To use SSPI for single sign-on, check the 'Enable automatic logon' option when ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/config_general.htm#UserAuth",children:"configuring Tableau Server to Use Active Directory"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/config_saml.htm",children:"Configuring Tableau Server for Server-wide SAML"}),"\nAlternatively, if each of your clients will have their own SAML iDP, you will need to ",(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/saml_site_specific.htm",children:"configure Tableau Server for site-specific SAML"})]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://onlinehelp.tableau.com/current/server/en-us/openid_auth_server_config.htm",children:"Configure Tableau Server for OpenID"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.br,{}),"\n*Next section: [User Management, Content Management & Display with the REST API]({{ site.baseurl }}/pages/03_server_management_and_restapi)*\n"]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/security/auth.md",route:"/security/auth",frontMatter:{title:"Authentication and Single Sign-On (SSO)"},timestamp:1696737179e3,pageMap:[{kind:"Meta",data:{"*":{type:"page"},index:{title:"Tableau Embedding Playbook",display:"hidden",theme:{layout:"full"}},architecture:{title:"Architecture",theme:{typesetting:"article"}},security:{title:"Security",theme:{typesetting:"article"}},frontend:{title:"Frontend",theme:{typesetting:"article"}},backend:{title:"Backend",theme:{typesetting:"article"}}}},{kind:"Folder",name:"architecture",route:"/architecture",children:[{kind:"Meta",data:{index:"Getting Started"}},{kind:"MdxPage",name:"index",route:"/architecture",frontMatter:{title:"Tableau Embedded Analytics Playbook",layout:"default"}}]},{kind:"Folder",name:"backend",route:"/backend",children:[{kind:"Meta",data:{restapi:"Tableau REST API",devops:"Devops"}},{kind:"MdxPage",name:"devops",route:"/backend/devops",frontMatter:{title:"Development and Deployment"}},{kind:"MdxPage",name:"restapi",route:"/backend/restapi",frontMatter:{title:"User Management, Content Management, and Display with the REST API"}}]},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{embedding_api:"Tableau Embedding API",non_views:"Embedding Non-View Content",other_apps:"Embedding into Other Apps"}},{kind:"MdxPage",name:"embedding_api",route:"/frontend/embedding_api",frontMatter:{title:"Embedding Tableau Views"}},{kind:"MdxPage",name:"non_views",route:"/frontend/non_views",frontMatter:{title:"Embedding Analytics Experiences"}},{kind:"MdxPage",name:"other_apps",route:"/frontend/other_apps",frontMatter:{title:"Embedding in SharePoint, Salesforce, and Mobile Apps"}}]},{kind:"MdxPage",name:"index",route:"/",frontMatter:{title:"Tableau Embedded Analytics Playbook",layout:"default"}},{kind:"Folder",name:"security",route:"/security",children:[{kind:"Meta",data:{auth:"Authentication & SSO",rls:"Row-Level Security"}},{kind:"MdxPage",name:"auth",route:"/security/auth",frontMatter:{title:"Authentication and Single Sign-On (SSO)"}},{kind:"MdxPage",name:"rls",route:"/security/rls",frontMatter:{title:"Row-level Security"}}]}],flexsearch:{codeblocks:!0},title:"Authentication and Single Sign-On (SSO)",headings:l},pageNextRoute:"/security/auth",nextraLayout:r.ZP,themeConfig:s.Z};t.default=(0,i.j)(d)},9812:function(e,t,n){"use strict";var a=n(5893);let i={logo:(0,a.jsx)("span",{children:"Embedding Playbook"}),project:{link:"https://github.com/Tab-SE/playbook_frontend"},docsRepositoryBase:"https://github.com/Tab-SE/playbook_frontend",footer:{text:"Tableau Embedding Playbook"}};t.Z=i}},function(e){e.O(0,[774,361,888,179],function(){return e(e.s=2095)}),_N_E=e.O()}]);